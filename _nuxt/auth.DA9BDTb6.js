var v=Object.defineProperty;var w=(t,e,s)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var c=(t,e,s)=>(w(t,typeof e!="symbol"?e+"":e,s),s);import{A as m,j as h,g as A,Q as T,R as g,S as k,N as F,M as U,T as I,U as b,O as S,I as C}from"./entry.DxbJCahr.js";function Q(t){return I()?(b(t),!0):!1}function f(t){return typeof t=="function"?t():A(t)}const $=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const W=Object.prototype.toString,q=t=>W.call(t)==="[object Object]",D=()=>{};function O(t,e){function s(...n){return new Promise((o,r)=>{Promise.resolve(t(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(o).catch(r)})}return s}const d=t=>t();function x(t=d){const e=h(!0);function s(){e.value=!1}function n(){e.value=!0}const o=(...r)=>{e.value&&t(...r)};return{isActive:g(e),pause:s,resume:n,eventFilter:o}}function R(t){return t||S()}function z(...t){if(t.length!==1)return T(...t);const e=t[0];return typeof e=="function"?g(k(()=>({get:e,set:D}))):h(e)}function j(t,e,s={}){const{eventFilter:n=d,...o}=s;return C(t,O(n,e),o)}function B(t,e,s={}){const{eventFilter:n,...o}=s,{eventFilter:r,pause:u,resume:a,isActive:i}=x(n);return{stop:j(t,e,{...o,eventFilter:r}),pause:u,resume:a,isActive:i}}function H(t,e=!0,s){R()?F(t,s):e?t():U(t)}function J(t=!1,e={}){const{truthyValue:s=!0,falsyValue:n=!1}=e,o=m(t),r=h(t);function u(a){if(arguments.length)return r.value=a,r.value;{const i=f(s);return r.value=r.value===i?f(n):i,r.value}}return o?u:[r,u]}class E{constructor(e){c(this,"Id");this.Id=e}getID(){return this.Id}}class y extends E{constructor(s,n,o,r,u){super(s);c(this,"_accountType");c(this,"_nick");c(this,"_email");c(this,"_password");this._nick=o,this._email=r,this._password=u,this._accountType=n}get nick(){return this._nick}set nick(s){this._nick=s}get type(){return this._accountType}set type(s){this._accountType=s}get email(){return this._email}set email(s){this._email=s}get password(){return this._password}set password(s){this._password=s}}class _ extends y{constructor(e,s,n,o){super(e,"user",s,n,o)}}class M extends y{constructor(e,s,n,o){super(e,"admin",s,n,o)}}class P{constructor(e){c(this,"_accountType");this._accountType=e||"user"}get acccountType(){return this._accountType}set accountType(e){this._accountType=e}create(e,s,n,o,r){return s==="user"?new _(e,n,o,r):new M(e,n,o,r)}}const l=(t="",e="")=>({key:"auth",value:t+e}),p=(t="",e="")=>({key:"auth",value:t+e});class G{constructor(){c(this,"_users",[]);c(this,"_accountF",new P("user"));this._users.push(new _("1","ramdom","random@gmail.com","1230123"))}getUsers(){return this._users}insertUser(e,s,n,o){this._accountF.accountType="user";const r=this._accountF.create(e,this._accountF.accountType,s,n,o);this._users.push(r)}}class K{constructor(e){c(this,"keepAlive");c(this,"UserCollection",new G);this.keepAlive=e}login(e,s){const n=this.UserCollection.getUsers().find(o=>o.email===e&&o.password===s)??!1;return n&&this.keepAlive?(p(n.nick,n.getID()),{loggedWith:"storage",success:!0}):n&&!this.keepAlive?(l(n.nick,n.getID()),{loggedWith:"session",success:!0}):{loggedWith:null,success:!1,message:"Account unexists"}}logout(){return p()?!0:!!l()}register(e,s,n,o){this.UserCollection.insertUser(e,s,n,o);const r=this.UserCollection.getUsers().find(u=>u.getID()===e);if(r)return this.keepAlive?(p(s,r==null?void 0:r.getID()),{loggedWith:"storage",success:!0}):(l(s,r==null?void 0:r.getID()),{loggedWith:"session",success:!0});throw new Error("Error registering new Account")}}export{K as A,H as a,f as b,Q as c,q as d,$ as i,D as n,z as t,J as u,B as w};

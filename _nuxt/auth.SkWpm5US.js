var g=Object.defineProperty;var p=(r,e,t)=>e in r?g(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var o=(r,e,t)=>(p(r,typeof e!="symbol"?e+"":e,t),t);class _{constructor(e){o(this,"Id");this.Id=e}getID(){return this.Id}}class l extends _{constructor(t,s,c,n,i){super(t);o(this,"_accountType");o(this,"_nick");o(this,"_email");o(this,"_password");this._nick=c,this._email=n,this._password=i,this._accountType=s}get nick(){return this._nick}set nick(t){this._nick=t}get type(){return this._accountType}set type(t){this._accountType=t}get email(){return this._email}set email(t){this._email=t}get password(){return this._password}set password(t){this._password=t}}class h extends l{constructor(e,t,s,c){super(e,"user",t,s,c)}}class d extends l{constructor(e,t,s,c){super(e,"admin",t,s,c)}}class y{constructor(e){o(this,"_accountType");this._accountType=e||"user"}get acccountType(){return this._accountType}set accountType(e){this._accountType=e}create(e,t,s,c,n){return t==="user"?new h(e,s,c,n):new d(e,s,c,n)}}const u=(r="",e="")=>({key:"auth",value:r+e}),a=(r="",e="")=>({key:"auth",value:r+e});class w{constructor(){o(this,"_users",[]);o(this,"_accountF",new y("user"));this._users.push(new h("1","ramdom","random@gmail.com","1230123"))}getUsers(){return this._users}insertUser(e,t,s,c){this._accountF.accountType="user";const n=this._accountF.create(e,this._accountF.accountType,t,s,c);this._users.push(n)}}class f{constructor(e){o(this,"keepAlive");o(this,"UserCollection",new w);this.keepAlive=e}login(e,t){const s=this.UserCollection.getUsers().find(c=>c.email===e&&c.password===t)??!1;return s&&this.keepAlive?(a(s.nick,s.getID()),{loggedWith:"storage",success:!0}):s&&!this.keepAlive?(u(s.nick,s.getID()),{loggedWith:"session",success:!0}):{loggedWith:null,success:!1,message:"Account unexists"}}logout(){return a()?!0:!!u()}register(e,t,s,c){this.UserCollection.insertUser(e,t,s,c);const n=this.UserCollection.getUsers().find(i=>i.getID()===e);if(n)return this.keepAlive?(a(t,n==null?void 0:n.getID()),{loggedWith:"storage",success:!0}):(u(t,n==null?void 0:n.getID()),{loggedWith:"session",success:!0});throw new Error("Error registering new Account")}}export{f as A};
